<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="人工智能 geek 极客 阅读 电影"><title>tensorflow安装教程 | Light</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">tensorflow安装教程</h1><a id="logo" href="/.">Light</a><p class="description">在这座城，等一个人</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/message/"><i class="fa fa-comments"> 留言</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">tensorflow安装教程</h1><div class="post-meta">Jan 20, 2019<span> | </span><span class="category"><a href="/categories/知识交流/">知识交流</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#说明"><span class="toc-number">1.</span> <span class="toc-text">说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装环境"><span class="toc-number">1.1.</span> <span class="toc-text">安装环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装方式"><span class="toc-number">1.2.</span> <span class="toc-text">安装方式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用pip安装"><span class="toc-number">2.</span> <span class="toc-text">使用pip安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#前期准备"><span class="toc-number">2.1.</span> <span class="toc-text">前期准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pip官网最新版安装"><span class="toc-number">2.2.</span> <span class="toc-text">pip官网最新版安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装cuda对应的历史版本"><span class="toc-number">2.3.</span> <span class="toc-text">安装cuda对应的历史版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#卸载-升级"><span class="toc-number">2.4.</span> <span class="toc-text">卸载/升级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-number">2.5.</span> <span class="toc-text">问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用docker安装"><span class="toc-number">3.</span> <span class="toc-text">使用docker安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装docker"><span class="toc-number">3.1.</span> <span class="toc-text">安装docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装nvidia-docker"><span class="toc-number">3.2.</span> <span class="toc-text">安装nvidia-docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装tensorflow"><span class="toc-number">3.3.</span> <span class="toc-text">安装tensorflow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题-1"><span class="toc-number">3.4.</span> <span class="toc-text">问题</span></a></li></ol></li></ol></div></div><div class="post-content"><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><ul>
<li>ubuntu16.04+conda</li>
</ul>
<h2 id="安装方式"><a href="#安装方式" class="headerlink" title="安装方式"></a>安装方式</h2><ul>
<li>如果使用pip安装(安装到主机)，那么请确定你的cuda、cudnn版本号和需要的是一致的，如果发现不一致而且又不能更改，那么请使用docker方式进行安装。</li>
<li>如果熟悉docker的使用，强烈建议使用docker安装，不然后面的更新之类的需要重新安装CUDA之类的依赖库，非常麻烦，使用docker的话CUDA是隔离的。</li>
<li>如果要做强化学习，那么得考虑docker的可视化问题，这个有点麻烦！</li>
</ul>
<h1 id="使用pip安装"><a href="#使用pip安装" class="headerlink" title="使用pip安装"></a>使用pip安装</h1><h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><p>请确保Nvidia驱动、cuda、cudnn已经安装，现在[24/12/2018]最新版本tensorflow的cuda版本号要求是9了。</p>
<h2 id="pip官网最新版安装"><a href="#pip官网最新版安装" class="headerlink" title="pip官网最新版安装"></a>pip官网最新版安装</h2><ol>
<li>conda创建环境</li>
<li>conda激活环境</li>
<li>pip安装tensorflow <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Current release for CPU-only</span></span><br><span class="line">pip <span class="keyword">install</span> tensorflow</span><br><span class="line"></span><br><span class="line"><span class="comment"># Nightly build for CPU-only (unstable)</span></span><br><span class="line">pip <span class="keyword">install</span> tf-nightly</span><br><span class="line"></span><br><span class="line"><span class="comment"># GPU package for CUDA-enabled GPU cards</span></span><br><span class="line">pip <span class="keyword">install</span> tensorflow-gpu</span><br><span class="line"></span><br><span class="line"><span class="comment"># Nightly build with GPU support (unstable)</span></span><br><span class="line">pip <span class="keyword">install</span> tf-nightly-gpu</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>gpu版本一般选择tensorflow-gpu。</p>
<h2 id="安装cuda对应的历史版本"><a href="#安装cuda对应的历史版本" class="headerlink" title="安装cuda对应的历史版本"></a>安装cuda对应的历史版本</h2><p>因为我们的计算机安装的cuda不一定是现阶段tensorflow需要的版本，所以我们可能需要安装历史版本，请查看相应的<a href="https://www.tensorflow.org/install/source#common_installation_problems" target="_blank" rel="noopener">版本对应表</a>。<br>1.5.0及之后到现在1.20都是需要cuda9了。找到版本号后在后面在2.2对应命令后加上“==version”即可，比如安装tensorflow-gpu的1.4.0版本:<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install tensorflow-gpu==<span class="number">1.4</span><span class="number">.0</span></span><br></pre></td></tr></table></figure></p>
<h2 id="卸载-升级"><a href="#卸载-升级" class="headerlink" title="卸载/升级"></a>卸载/升级</h2><ol>
<li><p>卸载tensorflow</p>
 <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pip</span> uninstall tensorflow/tensorflow-gpu</span><br></pre></td></tr></table></figure>
</li>
<li><p>升级tensorflow<br> 先卸载，然后再安装即可</p>
</li>
</ol>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>如果pip安装后发现自己的cuda版本号不对：<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImportError: libcublas.so<span class="number">.9</span><span class="number">.0</span>: cannot <span class="built_in">open</span> shared object <span class="built_in">file</span>: No such <span class="built_in">file</span> <span class="keyword">or</span> <span class="built_in">directory</span></span><br></pre></td></tr></table></figure></p>
<p>那么可以尝试使用docker安装</p>
<h1 id="使用docker安装"><a href="#使用docker安装" class="headerlink" title="使用docker安装"></a>使用docker安装</h1><p>安装之前请确定Nvidia驱动已经安装，cuda不是必须的！</p>
<h2 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h2><p>请先确保docker安装成功！</p>
<h2 id="安装nvidia-docker"><a href="#安装nvidia-docker" class="headerlink" title="安装nvidia-docker"></a>安装nvidia-docker</h2><p><a href="https://github.com/NVIDIA/nvidia-docker#quick-start" target="_blank" rel="noopener">安装nvidia-docker</a></p>
<h2 id="安装tensorflow"><a href="#安装tensorflow" class="headerlink" title="安装tensorflow"></a>安装<a href="https://www.tensorflow.org/install/docker?hl=zh-cn" target="_blank" rel="noopener">tensorflow</a></h2><p>安装GPU版本（python2）：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull tensorflow/<span class="string">tensorflow:</span>latest-gpu</span><br></pre></td></tr></table></figure></p>
<p>安装完成后进入bash(会创建container)：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --runtime=nvidia -it tensorflow/tensorflow:latest-gpu bash</span><br></pre></td></tr></table></figure></p>
<p><strong>记得使用-v参数共享本地目录</strong><br>上面的tensorflow是python2.7对应版本的，没有python3的，用下面的命令安装python3版本的docker：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull tensorflow/tensorflow:latest-gpu-py3</span><br></pre></td></tr></table></figure></p>
<h2 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h2><ol>
<li>安装好后可能发现在docker里面无法链接互联网，重新启动计算机即可。</li>
</ol>
</div><div class="tags"><a href="/tags/机器学习/">机器学习</a><a href="/tags/tensorflow/">tensorflow</a><a href="/tags/环境配置/">环境配置</a></div><div class="post-nav"><a class="pre" href="/2019/01/21/贝叶斯推断/">贝叶斯推断</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC80MjMxNi8xODg2Mw"><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="https://lightzhan.github.io"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/基础技能/">基础技能</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习笔记/">学习笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/知识交流/">知识交流</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程技能/">编程技能</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/强化学习/" style="font-size: 15px;">强化学习</a> <a href="/tags/论文阅读/" style="font-size: 15px;">论文阅读</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/tensorflow/" style="font-size: 15px;">tensorflow</a> <a href="/tags/环境配置/" style="font-size: 15px;">环境配置</a> <a href="/tags/计算机/" style="font-size: 15px;">计算机</a> <a href="/tags/概率统计/" style="font-size: 15px;">概率统计</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/05/30/ACER算法笔记整理/">Sample Efficient Actor-Critic With Experience Replay</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/29/Python变量-引用-对象/">Python变量=引用->对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/26/tensorflow的custom-getter/">tensorflow的custom_getter</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/15/Prioritized-Experience-Replay/">Prioritized Experience Replay</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/14/Self-Imitation-Learning/">Self-Imitation-Learning</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/13/动态规划/">动态规划</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/09/有限马尔科夫决策过程/">有限马尔科夫决策过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/08/强化学习概述/">强化学习概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/29/电脑防病毒指南/">电脑防病毒指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/23/为什么我的电脑这么卡网速这么慢/">为什么我的电脑这么卡网速这么慢</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/lightzhan/" title="My github" target="_blank">My github</a><ul></ul><a href="https://Mr-solution.github.io/Notes" title="Mr-solution" target="_blank">Mr-solution</a><ul></ul><a href="https://kchu.github.io/" title="飞语流年" target="_blank">飞语流年</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Light.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>